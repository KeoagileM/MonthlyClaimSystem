@model IEnumerable<ClaimSystem.Models.Claim>
@{
    ViewBag.Title = "Lecturer Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
    <link rel="stylesheet" href="~/css/site.css">
}

<h2>Lecturer Dashboard</h2>

<div class="card">
    <h3>Submit a New Claim</h3>
    <form asp-action="SubmitClaim" asp-controller="Lecture" method="post" enctype="multipart/form-data">
        <div class="form-group">
            <label>Employee Number</label>
            <input type="text" name="EmployeeNumber" required />
        </div>
        <div class="form-group">
            <label>Lecturer Name</label>
            <input type="text" name="LecturerName" required />
        </div>
        <div class="form-group">
            <label>Module</label>
            <select name="Module" required>
                <option value="">-- Select Module --</option>
                <option>Programming Fundamentals</option>
                <option>Web Development</option>
                <option>Database Systems</option>
                <option>Software Engineering</option>
            </select>
        </div>
        <div class="form-group">
            <label>Date</label>
            <input type="date" name="DateSubmitted" />
        </div>
        <div class="form-group">
            <label>Hourly Rate</label>
            <input type="number" name="HourlyRate" step="0.01" required />
        </div>
        <div class="form-group">
            <label>Hours Worked</label>
            <input type="number" name="HoursWorked" required />
        </div>
        <div class="form-group">
            <label>Upload Document</label>
            <input type="file" name="Document" accept=".pdf,.doc,.docx,.jpg,.png" required />
        </div>
        <button type="submit" class="full-btn">Submit Claim</button>
    </form>
</div>

<div class="card">
    <h3>My Claims</h3>
    <table>
        <thead>
            <tr>
                <th>Employee No.</th>
                <th>Lecturer Name</th>
                <th>Module</th>
                <th>Date</th>
                <th>Rate</th>
                <th>Hours</th>
                <th>Total</th>
                <th>Status</th>
                <th>Document</th>
                <th>Feedback</th>
            </tr>
        </thead>
        <tbody>
            @if (Model != null && Model.Any())
            {
                foreach (var claim in Model)
                {
                    <tr>
                        <td>@claim.EmployeeNumber</td>
                        <td>@claim.LecturerName</td>
                        <td>@claim.Module</td>
                        <td>@claim.DateSubmitted.ToShortDateString()</td>
                        <td>@String.Format("{0:C}", claim.HourlyRate)</td>
                        <td>@claim.HoursWorked</td>
                        <td>@String.Format("{0:C}", claim.TotalAmount)</td>
                        <td><span class="status @claim.Status.ToLower().Replace(" ", "-")">@claim.Status</span></td>
                        <td>
                            @if (!string.IsNullOrEmpty(claim.DocumentPath))
                            {
                                <a href="@claim.DocumentPath" target="_blank">View</a>
                            }
                            else
                            {

                                <em>No document</em>
                            }
                        </td>
                        <td>
                            @if (!string.IsNullOrEmpty(claim.RejectionReason))
                            {
                                <strong>@claim.RejectionReason</strong>
                            }
                            else
                            {

                                <em>—</em>
                            }
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr><td colspan="10">No claims yet</td></tr>
            }
        </tbody>
    </table>
</div>

